<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
    <menuitem name="Project" id="kro_proj_menu" parent="base.menu_main_pm" sequence="1"/>

    <record id="action_projects" model="ir.actions.act_window">
        <field name="name">Projects</field>
        <field name="res_model">project.project</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новый проект.
            </p>
        </field>
    </record>
    <record id="view_kro_project_form" model="ir.ui.view">
        <field name="name">kro.project.form</field>
        <field name="model">project.project</field>
        <field name="priority" eval="256"/>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <notebook position="inside">
                <page string="Проблемы">
                    <field name="problem_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'kro.view_kro_problem_form'}"/>
                </page>
            </notebook>
        </field>
    </record>
    <record id="view_kro_project_tree" model="ir.ui.view">
        <field name="name">kro.project.tree</field>
        <field name="model">project.project</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="user_id"/>
            </tree>
        </field>
    </record>
    <record id="action_project_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_kro_project_tree"/>
        <field name="act_window_id" ref="action_projects"/>
    </record>
    <record id="action_project_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_project_form"/>
        <field name="act_window_id" ref="action_projects"/>
    </record>

    <record id="view_kro_problem_tree" model="ir.ui.view">
        <field name="name">kro.problem.tree</field>
        <field name="model">kro.problem</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <data></data>
        </field>
    </record>
    <record id="view_kro_problem_form" model="ir.ui.view">
        <field name="name">kro.problem.form</field>
        <field name="model">kro.problem</field>
        <field name="priority" eval="256"/>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <field name="stage_id" position="replace">
                <field name="state" widget="statusbar" clickable="True"/>
                <field name="stage_id" widget="statusbar" clickable="True" options="{'fold_field': 'fold'}" invisible="1"/>
            </field>
            <field name="project_id" position="after">
                <field name="addressee_id"/>
            </field>
            <field name="user_id" position="replace"></field>
            <field name="date_deadline" position="before">
                <field name="create_date" string="Дата регистрации"/>
            </field>
            <field name="date_deadline" position="after">
                <field name="fact_date"/>
                <field name="user_id" string="Инициатор" readonly="1"
                                options='{"no_open": True}'
                                on_change="onchange_user_id(user_id, context)"
                                context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'project.group_project_user']}"/>
            </field>
            <field name="description" position="before">
                <h2>
                    <div style="width: 100%; float: left;">
                        <div style="float: left; width: 33%;">
                            <div style="margin: 10px; padding: 10px;">
                                Симптомы
                            </div>
                        </div>
                        <div style="float: left; width: 33%;">
                            <div style="margin: 10px; padding: 10px;">
                                Причины
                            </div>
                        </div>
                        <div style="float: right; width: 33%;">
                            <div style="margin: 10px; padding: 10px;">
                                Последствия
                            </div>
                        </div>
                    </div>
                </h2>
            </field>
            <field name="description" position="after">
                <!--<h2>Причины</h2>-->
                <!--<field name="causes"/>-->
                <!--<h2>К чему приведет, если не решить</h2>-->
                <!--<field name="effects"/>-->
                <h2>Решение и обоснование</h2>
                <field name="decision"/>
                <div class="oe_clear"/>
            </field>
            <field name="date_last_stage_update" position="after">
                <field name="user_aim_id"/>
                <field name="reason_aside_problem"/>
                <field name="reason_aside_aim"/>
                <field name="reason_aside_task"/>
            </field>
            <page name="description_page" position="after">
                <page string="Цели">
                    <field name="aim_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'kro.view_kro_aim_form'}"/>
                </page>
            </page>
        </field>
    </record>
    <record id="action_problems" model="ir.actions.act_window">
        <field name="name">Problems</field>
        <field name="res_model">kro.problem</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новую проблему.
            </p>
            <p>
                Проблемы используются для ...
            </p>
        </field>
    </record>
    <record id="action_kro_problem_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_kro_problem_tree"/>
        <field name="act_window_id" ref="action_problems"/>
    </record>
    <record id="action_kro_problem_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_problem_form"/>
        <field name="act_window_id" ref="action_problems"/>
    </record>

    <record id="view_kro_aim_tree" model="ir.ui.view">
        <field name="name">kro.aim.tree</field>
        <field name="model">kro.aim</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <data></data>
        </field>
    </record>
    <record id="view_kro_aim_form" model="ir.ui.view">
        <field name="name">kro.aim.form</field>
        <field name="model">kro.aim</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <page name="description_page" position="after">
                <page string="Задачи">
                    <field name="task_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'kro.view_kro_task_form'}"/>
                </page>
            </page>
        </field>
    </record>
    <record id="action_aims" model="ir.actions.act_window">
        <field name="name">Aims</field>
        <field name="res_model">kro.aim</field>
        <field name="view_type">form</field>
        <field name="domain">[]</field>
        <field name="view_mode">list,form</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новую цель.
            </p>
        </field>
    </record>
    <record id="action_aim_tree" model="ir.actions.act_window.view" >
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_kro_aim_tree"/>
        <field name="act_window_id" ref="action_aims"/>
    </record>
    <record id="action_aim_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_aim_form"/>
        <field name="act_window_id" ref="action_aims"/>
    </record>

    <record id="view_kro_task_tree" model="ir.ui.view">
        <field name="name">kro.task.tree</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <data></data>
        </field>
    </record>
    <record id="view_kro_task_form" model="ir.ui.view">
        <field name="name">kro.task.form</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
           <data></data>
        </field>
    </record>
    <record id="action_task" model="ir.actions.act_window">
        <field name="name">Tasks</field>
        <field name="res_model">project.task</field>
        <field name="view_type">form</field>
        <field name="domain">[]</field>
        <field name="view_mode">list,form</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новую задачу.
            </p>
        </field>
    </record>
    <record id="action_task_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_kro_task_tree"/>
        <field name="act_window_id" ref="action_task"/>
    </record>
    <record id="action_task_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_task_form"/>
        <field name="act_window_id" ref="action_task"/>
    </record>

    <menuitem action="action_projects" id="project_list" name="Проекты" parent="kro_proj_menu" sequence="1"/>
    <menuitem action="action_problems" id="problems_list" name="Проблемы" parent="kro_proj_menu" sequence="2"/>
    <menuitem action="action_aims" id="aims_list" name="Цели" parent="kro_proj_menu" sequence="3"/>
    <menuitem action="action_task" id="task_list" name="Задачи" parent="kro_proj_menu" sequence="4"/>

</data>
</openerp>





