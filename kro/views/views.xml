<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
    <menuitem name="Project" id="kro_proj_menu" parent="base.menu_main_pm" sequence="1"/>
    <!--ПРОЕКТ - PROJECT-->
    <record id="view_kro_project_form" model="ir.ui.view">
        <field name="name">kro.project.form</field>
        <field name="model">project.project</field>
        <field name="priority" eval="256"/>
        <field name="inherit_id" ref="project.edit_project"/>
        <field name="arch" type="xml">
            <field name="use_tasks" position="replace">
                <field name="use_tasks" invisible="1"/>
            </field>
            <notebook position="inside">
                <page string="Проблемы">
                    <field name="problem_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'kro.view_kro_problem_form'}"/>
                </page>
            </notebook>
        </field>
    </record>
    <record id="view_kro_project_tree" model="ir.ui.view">
        <field name="name">kro.project.tree</field>
        <field name="model">project.project</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Название"/>
                <field name="user_id"/>
            </tree>
        </field>
    </record>
    <record id="action_projects" model="ir.actions.act_window">
        <field name="name">Проекты</field>
        <field name="res_model">project.project</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новый проект.
            </p>
        </field>
    </record>
    <record id="action_project_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_kro_project_tree"/>
        <field name="act_window_id" ref="action_projects"/>
    </record>
    <record id="action_project_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_project_form"/>
        <field name="act_window_id" ref="action_projects"/>
    </record>
    <!--ПРОБЛЕМА - PROBLEM-->
    <record id="view_kro_problem_form" model="ir.ui.view">
        <field name="name">kro.problem.form</field>
        <field name="model">kro.problem</field>
        <field name="priority" eval="256"/>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <field name="name" position="replace">
                <field name="name" placeholder="Заголовок проблемы ..."/>
            </field>
            <field name="stage_id" position="replace">
                <field name="state" widget="statusbar" clickable="True"/>
                <field name="stage_id" widget="statusbar" clickable="True" options="{'fold_field': 'fold'}" invisible="1"/>
            </field>
            <field name="project_id" position="replace">
                <field name="project_id" invisible="1"/>
                <field name="kro_project_id"/>
                <field name="addressee_id"/>
            </field>
            <field name="user_id" position="replace"></field>
            <field name="date_deadline" position="before">
                <field name="create_date" string="Дата регистрации"/>
            </field>
            <field name="date_deadline" position="after">
                <field name="fact_date"/>
                <field name="user_id" string="Инициатор" readonly="1"
                                options='{"no_open": True}'
                                on_change="onchange_user_id(user_id, context)"
                                context="{'default_groups_ref': ['base.group_user', 'base.group_partner_manager', 'project.group_project_user']}"/>
            </field>
            <field name="description" position="before">
                <h2>
                    <div style="width: 100%; float: left;">
                        <div style="float: left; width: 33%;">
                            <div style="margin: 10px; padding: 10px;">
                                Симптомы
                            </div>
                        </div>
                        <div style="float: left; width: 33%;">
                            <div style="margin: 10px; padding: 10px;">
                                Причины
                            </div>
                        </div>
                        <div style="float: right; width: 33%;">
                            <div style="margin: 10px; padding: 10px;">
                                Последствия
                            </div>
                        </div>
                    </div>
                </h2>
            </field>
            <field name="description" position="after">
                <h2>Решение и обоснование</h2>
                <field name="decision"/>
                <div class="oe_clear"/>
            </field>
            <field name="date_last_stage_update" position="after">
                <field name="user_aim_id"/>
                <field name="reason_aside_problem"/>
                <field name="reason_aside_aim"/>
                <field name="reason_aside_task"/>
                <field name="reason_correction"/>
            </field>
            <page name="description_page" position="after">
                <page string="Цели">
                    <field name="aim_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'kro.view_kro_aim_form'}"/>
                </page>
            </page>
        </field>
    </record>
    <record id="kro_problem_tree" model="ir.ui.view">
        <field name="name">kro.problem.tree</field>
        <field name="model">kro.problem</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Название"/>
                <field name="state"/>
                <field name="addressee_id"/>
                <field name="kro_project_id"/>
                <field name="user_id"/>
            </tree>
        </field>
    </record>
    <record id="kro_problem_gantt" model="ir.ui.view">
        <field name="name">kro.problem.gantt</field>
        <field name="model">kro.problem</field>
        <field name="type">gantt8</field>
        <field eval="2" name="priority"/>
        <field name="arch" type="xml">
            <gantt8 date_start="date_start" date_stop="date_end" progress="progress" string="Tasks" default_group_by="project_id">
            </gantt8>
        </field>
    </record>
    <record id="action_problems" model="ir.actions.act_window">
        <field name="name">Проблемы</field>
        <field name="res_model">kro.problem</field>
        <field name="view_mode">tree,form,calendar,gantt8</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новую проблему.
            </p>
            <p>
                Проблемы используются для ...
            </p>
        </field>
    </record>
    <record id="action_kro_problem_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="kro_problem_tree"/>
        <field name="act_window_id" ref="action_problems"/>
    </record>
    <record id="action_kro_problem_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_problem_form"/>
        <field name="act_window_id" ref="action_problems"/>
    </record>
    <!--ЦЕЛЬ - AIM-->
    <record id="view_kro_aim_form" model="ir.ui.view">
        <field name="name">kro.aim.form</field>
        <field name="model">kro.aim</field>
        <field name="priority" eval="256" />
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <field name="tag_ids" position="after">
                <field name="planned_hours"/>
                <field name="total_time"/>
                <field name="progress" widget="progressbar"/>
            </field>
            <field name="planned_hours" position="replace">
                <field name="planned_hours" invisible="1"/>
            </field>
            <field name="name" position="replace">
            <field name="name" placeholder="Заголовок цели ..."/>
            </field>
            <button name="toggle_active" position="before">
                <button class="oe_stat_button" type="object" name="action_tasks" icon="fa-tasks" context="{'task_ids': task_ids}">
                    <field string="Tasks" name="task_count" widget="statinfo" options="{'label_field': 'label_tasks'}"/>
                </button>
            </button>
            <field name="stage_id" position="replace">
                <field name="state" widget="statusbar" clickable="True"/>
                <field name="stage_id" widget="statusbar" clickable="True" options="{'fold_field': 'fold'}" invisible="1"/>
            </field>
            <field name="date_deadline" position="replace">
                <field name="date_deadline" invisible="1"/>
            </field>
            <field name="date_deadline" position="before">
                <field name="date_start" readonly="1"/>
                <field name="date_end" readonly="1"/>
            </field>
            <field name="sequence" position="before">
                <field name="create_date" string="Дата регистрации"/>
                <field name="write_date" string="Изменено"/>
            </field>
            <field name="project_id" position="after">
                <field name="problem_id" context="{'form_view_ref': 'kro.view_kro_problem_form'}"/>
                <field name="user_id"/>
            </field>
            <page name="description_page" position="before">
                <page string="Задачи">
                    <field name="job_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'kro.view_kro_job_form'}">
                        <tree string="Задачи">
                            <field name="name"/>
                            <field name="state"/>
                            <field name="date_start"/>
                            <field name="date_end"/>
                        </tree>
                    </field>
                </page>
                <page string="Задания">
                    <field name="task_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'project.view_task_form2'}">
                        <tree string="Задания">
                            <field name="name"/>
                            <field name="state"/>
                            <field name="date_start"/>
                            <field name="date_end"/>
                        </tree>
                    </field>
                </page>
            </page>
            <field name="user_id" position="replace">
                <field name="user_id" invisible="1"/>
            </field>
            <field name="date_last_stage_update" position="after">
                <field name="reason_aside_problem"/>
                <field name="reason_aside_aim"/>
                <field name="reason_aside_task"/>
                <field name="reason_correction"/>
            </field>
        </field>
    </record>
    <record id="kro_aims_tree" model="ir.ui.view">
        <field name="name">kro.aim.tree</field>
        <field name="model">kro.aim</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Название"/>
                <field name="state"/>
                <field name="problem_id"/>
                <field name="project_id"/>
                <field name="user_id"/>
            </tree>
        </field>
    </record>
    <record id="kro_aim_tasks" model="ir.ui.view">
        <field name="name">project.task.search.form</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <tree position="replace">
                <tree decoration-info="job_id" decoration-danger="date_deadline and (date_deadline&lt;current_date)" string="Tasks">
                    <field name="message_needaction" invisible="1"/>
                    <field name="sequence" invisible="not context.get('seq_visible', False)"/>
                    <field name="job_id"/>
                    <field name="name"/>
                    <field name="project_id" invisible="context.get('user_invisible', False)"/>
                    <field name="user_id" invisible="context.get('user_invisible', False)"/>
                    <field name="planned_hours" invisible="context.get('set_visible',False)" groups="project.group_time_work_estimation_tasks"/>
                    <field name="date_deadline" invisible="context.get('deadline_visible',True)"/>
                    <field name="stage_id" invisible="context.get('set_visible',False)"/>
                </tree>
            </tree>
        </field>
    </record>
    <record id="kro_aims_gantt" model="ir.ui.view">
        <field name="name">kro.aim.gantt</field>
        <field name="model">kro.aim</field>
        <field name="type">gantt8</field>
        <field eval="2" name="priority"/>
        <field name="arch" type="xml">
            <gantt8 date_start="date_start" date_stop="date_end" progress="progress" string="Tasks" default_group_by="problem_id">
            </gantt8>
        </field>
    </record>
    <record id="kro_aims_task_search_form" model="ir.ui.view">
        <field name="name">project.task.search.form</field>
        <field name="model">project.task</field>
        <field name="arch" type="xml">
            <search string="Tasks">
                <field name="stage_id"/>
                <field name="stage_id"/>
                <field name="id"/>
                <field name="id"/>
                <field name="name"/>
                <field name="tag_ids"/>
                <field name="partner_id"/>
                <field name="project_id"/>
                <field name="user_id"/>
                <group expand="1" string="Group By">
                    <filter string="По задачам" name="job_id" context="{'group_by':'job_id'}"/>
                </group>
            </search>
        </field>
    </record>
    <record id="kro_aim_all_tasks" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="kro_aims_task_search_form"/>
    </record>
    <record id="action_aims" model="ir.actions.act_window">
        <field name="name">Цели</field>
        <field name="res_model">kro.aim</field>
        <field name="view_mode">tree,form,calendar,gantt8</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новую цель.
            </p>
        </field>
    </record>
    <record id="action_aim_tree" model="ir.actions.act_window.view" >
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="kro_aims_tree"/>
        <field name="act_window_id" ref="action_aims"/>
    </record>
    <record id="action_aim_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_aim_form"/>
        <field name="act_window_id" ref="action_aims"/>
    </record>
    <!--ЗАДАЧА - JOB-->
    <record id="view_kro_job_form" model="ir.ui.view">
        <field name="name">kro.task.form</field>
        <field name="model">kro.job</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="priority" eval="256" />
        <field name="arch" type="xml">
            <field name="tag_ids" position="after">
                <field name="planned_hours"/>
                <field name="total_time"/>
                <field name="progress" widget="progressbar"/>
            </field>
            <field name="planned_hours" position="replace">
                <field name="planned_hours" invisible="1"/>
            </field>
            <field name="name" position="replace">
                <field name="name" placeholder="Заголовок задачи ..."/>
            </field>
            <page name='description_page' position="after">
                <field name="message_needaction" invisible="1"/>
                <page string="Задания">
                    <field name="task_ids" nolabel="1" widget="one2many_list" mode="tree" context="{'message_needaction':False, 'form_view_ref': 'project.view_task_form2'}">
                        <tree string="Задания">
                            <field name="name"/>
                            <field name="state"/>
                            <field name="date_start"/>
                            <field name="date_end"/>
                        </tree>
                    </field>
                </page>
            </page>
            <sheet position="before">
                <header>
                    <field name="state" widget="statusbar" clickable="True"/>
                </header>
            </sheet>
            <field name="date_deadline" position="replace">
                <field name="date_deadline" invisible="1"/>
            </field>
            <field name="date_deadline" position="before">
                <field name="date_start" readonly="1"/>
                <field name="date_end" readonly="1"/>
            </field>
            <field name="sequence" position="before">
                <field name="create_date" string="Дата регистрации"/>
                <field name="write_date" string="Изменено"/>
            </field>
            <field name="project_id" position="after">
                <field name="problem_id" context="{'form_view_ref': 'kro.view_kro_problem_form'}"/>
                <field name="aim_id" context="{'form_view_ref': 'kro.view_kro_aim_form'}"/>
                <field name="user_id"/>
            </field>
            <field name="user_id" position="replace">
                <field name="user_id" invisible="1"/>
            </field>
            <field name="date_last_stage_update" position="after">
                <field name="reason_aside_problem"/>
                <field name="reason_aside_aim"/>
                <field name="reason_aside_task"/>
                <field name="reason_correction"/>
            </field>
        </field>
    </record>
    <record id="kro_jobs_tree" model="ir.ui.view">
        <field name="name">kro.job.tree</field>
        <field name="model">kro.job</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Название"/>
                <field name="state"/>
                <field name="project_id"/>
                <field name="problem_id"/>
                <field name="aim_id"/>
                <field name="user_id"/>
            </tree>
        </field>
    </record>
    <record id="kro_jobs_gantt" model="ir.ui.view">
        <field name="name">kro.job.gantt</field>
        <field name="model">kro.job</field>
        <field name="type">gantt8</field>
        <field eval="2" name="priority"/>
        <field name="arch" type="xml">
            <gantt8 date_start="date_start" date_stop="date_end" progress="progress" string="Tasks" default_group_by="aim_id">
            </gantt8>
        </field>
    </record>
    <record id="action_job" model="ir.actions.act_window">
        <field name="name">Задачи</field>
        <field name="res_model">kro.job</field>
        <field name="view_mode">tree,form,calendar,gantt8</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">
                Создайте новую задачу.
            </p>
        </field>
    </record>
    <record id="action_job_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="kro_jobs_tree"/>
        <field name="act_window_id" ref="action_job"/>
    </record>
    <record id="action_job_form" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_kro_job_form"/>
        <field name="act_window_id" ref="action_job"/>
    </record>
    <!--ЗАДАНИЕ - TASK-->
    <record id="view_task_form" model="ir.ui.view">
        <field name="name">project.task.form</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_form2"/>
        <field name="arch" type="xml">
            <field name="planned_hours" position="after">
                <field name="got_approver"/>
            </field>
            <xpath expr="//notebook/page[2]/group/field[@name='date_start']/.." position="replace">
            </xpath>
            <button name="toggle_active" position="before">
                <button class="oe_stat_button" type="object" name="action_move_time" icon="fa-clock-o" string="Пересчитать связанные"/>
            </button>
            <field name="date_deadline" position="replace">
                <field name="date_deadline" invisible="1"/>
            </field>
            <field name="name" position="replace">
                <field name="name" placeholder="Заголовок задания ..."/>
            </field>
            <field name="stage_id" position="replace">
                <field name="state" widget="statusbar" clickable="True"/>
                <field name="stage_id" widget="statusbar" clickable="True" options="{'fold_field': 'fold'}" invisible="1"/>
                <field name="message_needaction" invisible="1"/>
            </field>
            <field name="user_id" position="replace">
                <field name="user_id" string="Ответственный за планирование"/>
            </field>
            <field name="partner_id" position="after">
                <field name="amount"/>
                <field name="mark_state"/>
                <field name="mark_result"/>
                <field name="date_end" readonly="1"/>
            </field>
            <field name="project_id" position="replace">
                <field name="project_id" attrs="{'invisible': [('job_aim_id', '=', False)]}"/>
                <field name="problem_id" context="{'form_view_ref': 'kro.view_kro_problem_form'}" attrs="{'invisible': [('job_aim_id', '=', False)]}"/>
                <!--<field name="aim_id" context="{'form_view_ref': 'kro.view_kro_aim_form'}" attrs="{'invisible': [('aim_id', '=', False)]}"/>-->
                <field name="aim_id"/>
                <field name="job_aim_id" context="{'form_view_ref': 'kro.view_kro_aim_form'}" attrs="{'invisible': ['|',('job_aim_id', '=', False),('aim_id', '!=', False)]}"/>
                <field name="job_id" context="{'form_view_ref': 'kro.view_kro_job_form'}" attrs="{'invisible': [('job_aim_id', '=', False)]}"/>
            </field>
            <page name="description_page" position='after'>
                <page name="depend_on_ids" string='Блокирующие задания'>
                    <field name="depend_on_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'project.view_task_form2'}"/>
                </page>
                <page name="dependent_ids" string='Блокируемые задания'>
                    <field name="dependent_ids" nolabel="1" widget="many2many_list" mode="tree" context="{'form_view_ref': 'project.view_task_form2'}"/>
                </page>
            </page>
            <notebook position="before">
                <group col="3">
                    <group col="1">
                        <h3>Исполнитель</h3>
                        <hr style="margin-top: 0;margin-bottom: 0;"/>
                        <div col="2">
                            <field name="user_executor_id" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Согласовал </span>
                            <field name="approved_by_executor"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Дата начала: </span>
                            <field name="date_start"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Дата завершения: </span>
                            <field name="date_end_ex" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Оценка времени: </span>
                            <field name="plan_time_ex" nolabel="1"/>
                        </div>
                    </group>
                    <group col="1">
                        <h3>Утверждающий</h3>
                        <hr style="margin-top: 0;margin-bottom: 0;"/>
                        <div col="2">
                            <field name="user_predicator_id" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Согласовал </span>
                            <field name="approved_by_predicator"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Дата начала: </span>
                            <field name="date_start_pr" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Дата завершения: </span>
                            <field name="date_end_pr" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Оценка времени: </span>
                            <field name="plan_time_pr" nolabel="1"/>
                        </div>
                    </group>
                    <group col="1" attrs="{'invisible': [('got_approver', '=', False)]}">
                        <h3>Подтверждающий</h3>
                        <hr style="margin-top: 0;margin-bottom: 0;"/>
                        <div col="2">
                            <field name="user_approver_id" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Согласовал </span>
                            <field name="approved_by_approver"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Дата начала: </span>
                            <field name="date_start_ap" nolabel="1"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Дата завершения: </span>
                            <field name="date_end_ap"/>
                        </div>
                        <div col="2">
                            <span style="font-weight: bold;">Оценка времени: </span>
                            <field name="plan_time_ap" nolabel="1"/>
                        </div>
                    </group>
                </group>
            </notebook>
            <field name="description" position="after">
                <h3>Требуемый результат + способ  его измерения</h3>
                <field name="required_result"/>
            </field>
        </field>
    </record>
    <record id="view_task_tree" model="ir.ui.view">
        <field name="name">project.task.tree</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_tree2"/>
        <field name="arch" type="xml">
            <tree position="replace">
                <tree string="Задания">
                    <field name="code" string="Номер"/>
                    <field name="job_id" string="Задача"/>
                    <field name="name" string="Задание"/>
                    <field name="state"/>
                    <field name="user_id" string="Ответственный"/>
                    <field name="date_start"/>
                    <field name="date_end"/>
                    <field name="progress"/>
                </tree>
            </tree>
        </field>
    </record>
    <record id="view_task_kanban" model="ir.ui.view">
        <field name="name">project.task.kanban</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_kanban"/>
        <field name="arch" type="xml">
            <kanban default_group_by="stage_id" position="attributes">
                <attribute name="default_group_by">state</attribute>
            </kanban>
        </field>
    </record>
    <record id="kro_task_gantt" model="ir.ui.view">
        <field name="name">kro.job.gantt</field>
        <field name="model">project.task</field>
        <field name="type">gantt8</field>
        <field eval="2" name="priority"/>
        <field name="arch" type="xml">
            <gantt8 date_start="date_start" date_stop="date_end" progress="progress" string="Tasks" default_group_by="job_id">
            </gantt8>
        </field>
    </record>
    <record id="kro_action_view_task" model="ir.actions.act_window">
        <field name="name">Задания</field>
        <field name="res_model">project.task</field>
        <field name="view_mode">tree,form,kanban,calendar,pivot,graph,gantt8</field>
        <field name="context">{}</field>
        <field name="search_view_id" ref="project.view_task_search_form"/>
        <field name="help" type="html">
            <p>
                Задания
            </p>
        </field>
    </record>
    <record id="view_calendar_form" model="ir.ui.view">
        <field name="name">calendar.event.inherit</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="calendar.view_calendar_event_form"/>
        <field name="arch" type="xml">
            <sheet position="before">
                <header>
                    <field name="state" widget="statusbar" clickable="True"/>
                </header>
            </sheet>
            <field name="partner_ids" position="after">
                <group>
                    <group>
                        <field name="user_id" string="Модератор"/>
                        <field name="approver_id"/>
                        <field name="user_plan_id"/>
                    </group>
                </group>
            </field>
            <notebook position="inside">
                <page name="bound" string="Связи">
                    <group>
                        <group>
                            <field name="project_id"/>
                            <field name="problem_id"/>
                            <field name="aim_id"/>
                            <field name="task_id"/>
                        </group>
                    </group>
                </page>
            </notebook>
            <label for="description" position="replace"></label>
            <field name="description" position="replace">
                <h3>Цели обсуждения</h3>
                <field name="description"/>
                <h3>Требуемые результаты</h3>
                <field name="expectations"/>
            </field>
        </field>
    </record>
    <record id="action_task_tree" model="ir.actions.act_window.view">
        <field name="sequence" eval="1"/>
        <field name="view_mode">tree</field>
        <field name="view_id" ref="view_task_tree"/>
    </record>
    <!--МЕНЮ-->
    <menuitem action="action_projects" id="project_list" name="Проекты" parent="kro_proj_menu" sequence="1"/>
    <menuitem action="action_problems" id="problems_list" name="Проблемы" parent="kro_proj_menu" sequence="2"/>
    <menuitem action="action_aims" id="aims_list" name="Цели" parent="kro_proj_menu" sequence="3"/>
    <menuitem action="action_job" id="job_list" name="Задачи" parent="kro_proj_menu" sequence="4"/>
    <menuitem action="kro_action_view_task" string="Задания" name="Задания" parent="kro_proj_menu" sequence="5"/>

</data>
</openerp>
